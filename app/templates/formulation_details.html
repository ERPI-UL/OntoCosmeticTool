{% extends 'base.html' %}
{% from 'bootstrap5/table.html' import render_table %}

{% macro format(value) -%}
    {% if value %}
        {% if value is iterable and (value is not string and value is not mapping) %}
        {{ value|join(', ') }}
        {% else %}
        {{ value }}
        {% endif %}
    {% else %}
        -
    {% endif %}
{%- endmacro %}
{% block content %}
<h1>Formulation Details</h1>
<p></p>
<h2></h2>

<h3>Product Properties</h3>
<table class="table">
    <tr>
        <td>Stability</td>
        <td>{{ format(formul.stability) }}</td>
    </tr>
    <tr>
        <td>Oilyness</td>
        <td>{{ format(formul.oiliness)}}</td>
    </tr>
    <tr>
        <td>Viscosity</td>
        <td>{{ format(formul.viscosity)}}</td>
    </tr>
    <tr>
        <td>Total Surfactant Qte</td>
        <td>{{ format(formul.surfactQte)}}</td>
    </tr>
    <tr>
        <td>Total Thickener Qte</td>
        <td>{{ format(formul.thickenerQte)}}</td>
    </tr>
    <tr>
        <td>Nb Surfactant</td>
        <td>{{ format(formul.surfactNb)}}</td>
    </tr>
    <tr>
        <td>Total Oily Phase</td>
        <td>{{ format(formul.oilyPhaseQte)}}</td>
    </tr>
</table>

<h3>Dosages</h3>
{{ render_table(formul.dosages, [('ing', 'Ingredient'), ('qte', 'Quantity')]) }}

<h3>Satisfied Heuristics</h3>
{{ render_table(heur, [('id', 'ID'), ('description', 'Description')]) }}

<form action={{ url_for("page_formul_details", iri=formul.iri) }}>
    <input type="hidden" id="action" name="action" value="water">
    <input class="btn btn-primary text-white" type="submit" value="Calculate Water">
</form>

<form action={{url_for("page_formul_details", iri=formul.iri)}}>
    <input type="hidden" id="action" name="action" value="reasoning">
    <input class="btn btn-primary text-white"  type="submit" value="Reasoning">
</form>

<form action={{url_for("page_formul_details", iri=formul.iri)}}>
    <input type="hidden" id="action" name="action" value="surfactantQte">
    <input class="btn btn-primary text-white"  type="submit" value="Calculate Surfactant Quantity">
</form>

<form action={{url_for("page_formul_details", iri=formul.iri)}}>
    <input type="hidden" id="action" name="action" value="surfactantNb">
    <input class="btn btn-primary text-white"  type="submit" value="Count Surfactant Number">
</form>

<form action={{url_for("page_formul_details", iri=formul.iri)}}>
    <input type="hidden" id="action" name="action" value="thickenerQte">
    <input class="btn btn-primary text-white"  type="submit" value="Calculate Thickener Quantity">
</form>

<form action={{url_for("page_formul_details", iri=formul.iri)}}>
    <input type="hidden" id="action" name="action" value="save">
    <input class="btn btn-primary text-white"  type="submit" value="Save Onto">
</form>

{% endblock %}